{% extends "superadmin/base.html" %}

{% block content %}

<h2>Bookings Manage</h2>
<hr>

<div class="card">
  <div class="card-body">

    <table class="table table-bordered table-striped">
      <tr>
        <th>ID</th>
        <th>Hotel</th>
        <th>Guest</th>
        <th>Check-in</th>
        <th>Check-out</th>
        <th>Status</th>
        <th>Action</th>
      </tr>

      {% for b in bookings %}
      <tr>
        <td>{{ b.id }}</td>
        <td>{{ b.hotel.hotel_name }}</td>
        <td>{{ b.user.email }}</td>
        <td>{{ b.checkin_date }}</td>
        <td>{{ b.checkout_date }}</td>

        <td>
          {% if b.booking_status == "confirmed" %}
            <span class="badge bg-success">Confirmed</span>
          {% elif b.booking_status == "cancelled" %}
            <span class="badge bg-danger">Cancelled</span>
          {% elif b.booking_status == "checkedin" %}
            <span class="badge bg-info">Checked-in</span>
          {% elif b.booking_status == "checkedout" %}
            <span class="badge bg-secondary">Checked-out</span>
          {% endif %}
        </td>

        <td>
          <form method="post" action="/super/update-booking/{{ b.id }}/">
            {% csrf_token %}

            <select name="status" class="form-control">
              <option value="confirmed" {% if b.booking_status == "confirmed" %}selected{% endif %}>Confirmed</option>
              <option value="cancelled" {% if b.booking_status == "cancelled" %}selected{% endif %}>Cancelled</option>
              <option value="checkedin" {% if b.booking_status == "checkedin" %}selected{% endif %}>Checked-in</option>
              <option value="checkedout" {% if b.booking_status == "checkedout" %}selected{% endif %}>Checked-out</option>
            </select>

            <br>

            <textarea name="reason" class="form-control" placeholder="Cancel reason"></textarea>

            <br>
            <button type="submit" class="btn btn-primary btn-sm">Save</button>
          </form>
        </td>
      </tr>
      {% endfor %}

    </table>

  </div>
</div>

{% endblock %}
